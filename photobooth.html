<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PhotoBooth ‚Äî My Love</title>
<link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
<header class="top-nav">
  <div class="logo">üíñ My Love</div>
  <nav>
    <a href="home.html">Home</a>
    <a href="about.html">About</a>
    <a href="contact.html">Contact</a>
  </nav>
</header>

<section class="photobooth-page">
  <h1>PhotoBooth üéûÔ∏è</h1>
  <input type="file" id="pbUpload" multiple>
  <select id="templateSelect">
    <option value="none">Select Template</option>
    <option value="christmas">Christmas</option>
    <option value="halloween">Halloween</option>
    <option value="romantic">Romantic</option>
    <option value="fantasy">Fantasy</option>
  </select>
  <select id="picCount">
    <option value="1">1 Picture</option>
    <option value="3">3 Pictures</option>
    <option value="6">6 Pictures</option>
  </select>
  <button id="pbPreview">Preview</button>
  <canvas id="pbCanvas" width="600" height="400"></canvas>
  <button id="pbDownload">Download</button>
</section>

<script src="assets/js/app.js"></script>
<script>
// Photobooth logic
const pbUpload = document.getElementById('pbUpload');
const templateSelect = document.getElementById('templateSelect');
const picCount = document.getElementById('picCount');
const pbPreview = document.getElementById('pbPreview');
const pbCanvas = document.getElementById('pbCanvas');
const ctx = pbCanvas.getContext('2d');
let images = [];

pbUpload.addEventListener('change', e => {
  images = [];
  Array.from(e.target.files).forEach(file => {
    const reader = new FileReader();
    reader.onload = ev => { images.push(ev.target.result); };
    reader.readAsDataURL(file);
  });
});

pbPreview.addEventListener('click', () => {
  ctx.clearRect(0,0,pbCanvas.width,pbCanvas.height);
  const count = parseInt(picCount.value);
  const w = pbCanvas.width / count;
  const h = pbCanvas.height;
  for(let i=0;i<count;i++){
    if(images[i]) {
      const img = new Image();
      img.src = images[i];
      img.onload = () => {
        ctx.drawImage(img, i*w, 0, w, h);
        drawTemplate();
      };
    }
  }
});

function drawTemplate(){
  const tpl = templateSelect.value;
  ctx.strokeStyle='pink';
  ctx.lineWidth=15;
  if(tpl==='christmas') ctx.strokeStyle='green';
  else if(tpl==='halloween') ctx.strokeStyle='orange';
  else if(tpl==='romantic') ctx.strokeStyle='red';
  else if(tpl==='fantasy') ctx.strokeStyle='purple';
  ctx.strokeRect(0,0,pbCanvas.width,pbCanvas.height);
}

document.getElementById('pbDownload').addEventListener('click', () => {
  const a=document.createElement('a');
  a.href=pbCanvas.toDataURL();
  a.download='photobooth.png';
  a.click();
});
</script>
</body>
</html>
